<div class="repository h-full">
  @if (!repository) {
    <div class="grid place-items-center h-full w-full">
      <p-progress-spinner />
    </div>
  } @else {
    <div class="mb-4">
      <button pButton pRipple text severity="secondary" class="block !p-0" routerLink="/repositories">
        <i class="pi pi-angle-left"></i>
        <span pButtonLabel>Repositories</span>
      </button>
    </div>

    <div class="mb-4">
      <app-repository-info [repository]="repository"></app-repository-info>
    </div>

    <div class="mb-4" [ngClass]="{ 'panel--disabled': isDataLoading }">
      <p-panel header="Issues">
        <div *ngIf="!repository.issues?.length">No issues available for selected repository.</div>
        @for (issue of repository.issues; track issue; let isLast = $last) {
          <div [ngClass]="{ 'mb-2': !isLast }">
            <div>
              <span class="font-bold">{{ issue.title }}</span>
              <a [href]="issue.url" target="_blank" class="ml-2" title="Issue URL">
                <span class="pi pi-link text-color"></span
              ></a>
            </div>
            <div>
              <small>{{ issue.author }} | {{ issue.createdAt | date }}</small>
            </div>
          </div>
          <p-divider *ngIf="!isLast" />
        }
      </p-panel>
    </div>

    <app-pagination (paginationChange)="onPaginationChange($event)"></app-pagination>
  }
</div>
